import{d as $,f as rt}from"./chunk-OBPWZYQZ.js";import{f as n,h as A,i as st}from"./chunk-LGMSABOQ.js";n();n();n();n();n();n();n();n();n();n();var It="[object AsyncFunction]",Dt="[object Function]",Rt="[object GeneratorFunction]",jt="[object Proxy]";function Wt(s){if(!A(s))return!1;var t=rt(s);return t==Dt||t==Rt||t==It||t==jt}var nt=Wt;n();n();var Pt=$["__core-js_shared__"],B=Pt;var ot=function(){var s=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function $t(s){return!!ot&&ot in s}var at=$t;n();var Bt=Function.prototype,Ht=Bt.toString;function Ut(s){if(s!=null){try{return Ht.call(s)}catch{}try{return s+""}catch{}}return""}var ht=Ut;var Nt=/[\\^$.*+?()[\]{}|]/g,Gt=/^\[object .+?Constructor\]$/,Vt=Function.prototype,qt=Object.prototype,Kt=Vt.toString,Jt=qt.hasOwnProperty,Xt=RegExp("^"+Kt.call(Jt).replace(Nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yt(s){if(!A(s)||at(s))return!1;var t=nt(s)?Xt:Gt;return t.test(ht(s))}var lt=Yt;n();function Qt(s,t){return s?.[t]}var ct=Qt;function Zt(s,t){var e=ct(s,t);return lt(e)?e:void 0}var H=Zt;var te=H(Object,"create"),x=te;function ee(){this.__data__=x?x(null):{},this.size=0}var ft=ee;n();function ie(s){var t=this.has(s)&&delete this.__data__[s];return this.size-=t?1:0,t}var dt=ie;n();var se="__lodash_hash_undefined__",re=Object.prototype,ne=re.hasOwnProperty;function oe(s){var t=this.__data__;if(x){var e=t[s];return e===se?void 0:e}return ne.call(t,s)?t[s]:void 0}var ut=oe;n();var ae=Object.prototype,he=ae.hasOwnProperty;function le(s){var t=this.__data__;return x?t[s]!==void 0:he.call(t,s)}var pt=le;n();var ce="__lodash_hash_undefined__";function fe(s,t){var e=this.__data__;return this.size+=this.has(s)?0:1,e[s]=x&&t===void 0?ce:t,this}var mt=fe;function C(s){var t=-1,e=s==null?0:s.length;for(this.clear();++t<e;){var i=s[t];this.set(i[0],i[1])}}C.prototype.clear=ft;C.prototype.delete=dt;C.prototype.get=ut;C.prototype.has=pt;C.prototype.set=mt;var K=C;n();n();function de(){this.__data__=[],this.size=0}var gt=de;n();n();n();function ue(s,t){return s===t||s!==s&&t!==t}var _t=ue;function pe(s,t){for(var e=s.length;e--;)if(_t(s[e][0],t))return e;return-1}var b=pe;var me=Array.prototype,ge=me.splice;function _e(s){var t=this.__data__,e=b(t,s);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():ge.call(t,e,1),--this.size,!0}var yt=_e;n();function ye(s){var t=this.__data__,e=b(t,s);return e<0?void 0:t[e][1]}var vt=ye;n();function ve(s){return b(this.__data__,s)>-1}var St=ve;n();function Se(s,t){var e=this.__data__,i=b(e,s);return i<0?(++this.size,e.push([s,t])):e[i][1]=t,this}var xt=Se;function E(s){var t=-1,e=s==null?0:s.length;for(this.clear();++t<e;){var i=s[t];this.set(i[0],i[1])}}E.prototype.clear=gt;E.prototype.delete=yt;E.prototype.get=vt;E.prototype.has=St;E.prototype.set=xt;var wt=E;n();var xe=H($,"Map"),bt=xe;function we(){this.size=0,this.__data__={hash:new K,map:new(bt||wt),string:new K}}var zt=we;n();n();n();function be(s){var t=typeof s;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?s!=="__proto__":s===null}var Lt=be;function ze(s,t){var e=s.__data__;return Lt(t)?e[typeof t=="string"?"string":"hash"]:e.map}var z=ze;function Le(s){var t=z(this,s).delete(s);return this.size-=t?1:0,t}var Tt=Le;n();function Te(s){return z(this,s).get(s)}var Ft=Te;n();function Fe(s){return z(this,s).has(s)}var At=Fe;n();function Ae(s,t){var e=z(this,s),i=e.size;return e.set(s,t),this.size+=e.size==i?0:1,this}var Ct=Ae;function O(s){var t=-1,e=s==null?0:s.length;for(this.clear();++t<e;){var i=s[t];this.set(i[0],i[1])}}O.prototype.clear=zt;O.prototype.delete=Tt;O.prototype.get=Ft;O.prototype.has=At;O.prototype.set=Ct;var J=O;var Ce="Expected a function";function X(s,t){if(typeof s!="function"||t!=null&&typeof t!="function")throw new TypeError(Ce);var e=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=e.cache;if(o.has(r))return o.get(r);var a=s.apply(this,i);return e.cache=o.set(r,a)||o,a};return e.cache=new(X.Cache||J),e}X.Cache=J;var W=X;n();var P=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Ee=typeof AbortController=="function",U=Ee?AbortController:class{constructor(){this.signal=new Et}abort(t=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||t,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},Oe=typeof AbortSignal=="function",ke=typeof U.AbortSignal=="function",Et=Oe?AbortSignal:ke?U.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(t){t.type==="abort"&&(this.aborted=!0,this.onabort(t),this._listeners.forEach(e=>e(t),this))}onabort(){}addEventListener(t,e){t==="abort"&&this._listeners.push(e)}removeEventListener(t,e){t==="abort"&&(this._listeners=this._listeners.filter(i=>i!==e))}},tt=new Set,Y=(s,t)=>{let e=`LRU_CACHE_OPTION_${s}`;N(e)&&et(e,`${s} option`,`options.${t}`,w)},Q=(s,t)=>{let e=`LRU_CACHE_METHOD_${s}`;if(N(e)){let{prototype:i}=w,{get:r}=Object.getOwnPropertyDescriptor(i,s);et(e,`${s} method`,`cache.${t}()`,r)}},Me=(s,t)=>{let e=`LRU_CACHE_PROPERTY_${s}`;if(N(e)){let{prototype:i}=w,{get:r}=Object.getOwnPropertyDescriptor(i,s);et(e,`${s} property`,`cache.${t}`,r)}},Ot=(...s)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...s):console.error(...s)},N=s=>!tt.has(s),et=(s,t,e,i)=>{tt.add(s);let r=`The ${t} is deprecated. Please use ${e} instead.`;Ot(r,"DeprecationWarning",s,i)},L=s=>s&&s===Math.floor(s)&&s>0&&isFinite(s),kt=s=>L(s)?s<=Math.pow(2,8)?Uint8Array:s<=Math.pow(2,16)?Uint16Array:s<=Math.pow(2,32)?Uint32Array:s<=Number.MAX_SAFE_INTEGER?k:null:null,k=class extends Array{constructor(t){super(t),this.fill(0)}},Z=class{constructor(t){if(t===0)return[];let e=kt(t);this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},w=class{constructor(t={}){let{max:e=0,ttl:i,ttlResolution:r=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:u,allowStale:_,dispose:d,disposeAfter:l,noDisposeOnSet:m,noUpdateTTL:c,maxSize:p=0,maxEntrySize:y=0,sizeCalculation:g,fetchMethod:f,fetchContext:T,noDeleteOnFetchRejection:M,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:v,allowStaleOnFetchAbort:I,ignoreFetchAbort:F}=t,{length:D,maxAge:R,stale:j}=t instanceof w?{}:t;if(e!==0&&!L(e))throw new TypeError("max option must be a nonnegative integer");let V=e?kt(e):Array;if(!V)throw new Error("invalid max value: "+e);if(this.max=e,this.maxSize=p,this.maxEntrySize=y||this.maxSize,this.sizeCalculation=g||D,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=f||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=T,!this.fetchMethod&&T!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(e).fill(null),this.valList=new Array(e).fill(null),this.next=new V(e),this.prev=new V(e),this.head=0,this.tail=0,this.free=new Z(e),this.initialFill=1,this.size=0,typeof d=="function"&&(this.dispose=d),typeof l=="function"?(this.disposeAfter=l,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!m,this.noUpdateTTL=!!c,this.noDeleteOnFetchRejection=!!M,this.allowStaleOnFetchRejection=!!v,this.allowStaleOnFetchAbort=!!I,this.ignoreFetchAbort=!!F,this.maxEntrySize!==0){if(this.maxSize!==0&&!L(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!L(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!_||!!j,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!u,this.ttlResolution=L(r)||r===0?r:1,this.ttlAutopurge=!!o,this.ttl=i||R||0,this.ttl){if(!L(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let q="LRU_CACHE_UNBOUNDED";N(q)&&(tt.add(q),Ot("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",q,w))}j&&Y("stale","allowStale"),R&&Y("maxAge","ttl"),D&&Y("length","sizeCalculation")}getRemainingTTL(t){return this.has(t,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new k(this.max),this.starts=new k(this.max),this.setItemTTL=(i,r,o=P.now())=>{if(this.starts[i]=r!==0?o:0,this.ttls[i]=r,r!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(i)&&this.delete(this.keyList[i])},r+1);a.unref&&a.unref()}},this.updateItemAge=i=>{this.starts[i]=this.ttls[i]!==0?P.now():0},this.statusTTL=(i,r)=>{i&&(i.ttl=this.ttls[r],i.start=this.starts[r],i.now=t||e(),i.remainingTTL=i.now+i.ttl-i.start)};let t=0,e=()=>{let i=P.now();if(this.ttlResolution>0){t=i;let r=setTimeout(()=>t=0,this.ttlResolution);r.unref&&r.unref()}return i};this.getRemainingTTL=i=>{let r=this.keyMap.get(i);return r===void 0?0:this.ttls[r]===0||this.starts[r]===0?1/0:this.starts[r]+this.ttls[r]-(t||e())},this.isStale=i=>this.ttls[i]!==0&&this.starts[i]!==0&&(t||e())-this.starts[i]>this.ttls[i]}updateItemAge(t){}statusTTL(t,e){}setItemTTL(t,e,i){}isStale(t){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new k(this.max),this.removeItemSize=t=>{this.calculatedSize-=this.sizes[t],this.sizes[t]=0},this.requireSize=(t,e,i,r)=>{if(this.isBackgroundFetch(e))return 0;if(!L(i))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(i=r(e,t),!L(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.addItemSize=(t,e,i)=>{if(this.sizes[t]=e,this.maxSize){let r=this.maxSize-this.sizes[t];for(;this.calculatedSize>r;)this.evict(!0)}this.calculatedSize+=this.sizes[t],i&&(i.entrySize=e,i.totalCalculatedSize=this.calculatedSize)}}removeItemSize(t){}addItemSize(t,e){}requireSize(t,e,i,r){if(i||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.tail;!(!this.isValidIndex(e)||((t||!this.isStale(e))&&(yield e),e===this.head));)e=this.prev[e]}*rindexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.head;!(!this.isValidIndex(e)||((t||!this.isStale(e))&&(yield e),e===this.tail));)e=this.next[e]}isValidIndex(t){return t!==void 0&&this.keyMap.get(this.keyList[t])===t}*entries(){for(let t of this.indexes())this.valList[t]!==void 0&&this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield[this.keyList[t],this.valList[t]])}*rentries(){for(let t of this.rindexes())this.valList[t]!==void 0&&this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield[this.keyList[t],this.valList[t]])}*keys(){for(let t of this.indexes())this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.keyList[t])}*rkeys(){for(let t of this.rindexes())this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.keyList[t])}*values(){for(let t of this.indexes())this.valList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.valList[t])}*rvalues(){for(let t of this.rindexes())this.valList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.valList[t])}[Symbol.iterator](){return this.entries()}find(t,e){for(let i of this.indexes()){let r=this.valList[i],o=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;if(o!==void 0&&t(o,this.keyList[i],this))return this.get(this.keyList[i],e)}}forEach(t,e=this){for(let i of this.indexes()){let r=this.valList[i],o=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;o!==void 0&&t.call(e,o,this.keyList[i],this)}}rforEach(t,e=this){for(let i of this.rindexes()){let r=this.valList[i],o=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;o!==void 0&&t.call(e,o,this.keyList[i],this)}}get prune(){return Q("prune","purgeStale"),this.purgeStale}purgeStale(){let t=!1;for(let e of this.rindexes({allowStale:!0}))this.isStale(e)&&(this.delete(this.keyList[e]),t=!0);return t}dump(){let t=[];for(let e of this.indexes({allowStale:!0})){let i=this.keyList[e],r=this.valList[e],o=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;if(o===void 0)continue;let a={value:o};if(this.ttls){a.ttl=this.ttls[e];let u=P.now()-this.starts[e];a.start=Math.floor(Date.now()-u)}this.sizes&&(a.size=this.sizes[e]),t.unshift([i,a])}return t}load(t){this.clear();for(let[e,i]of t){if(i.start){let r=Date.now()-i.start;i.start=P.now()-r}this.set(e,i.value,i)}}dispose(t,e,i){}set(t,e,{ttl:i=this.ttl,start:r,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:_=this.noUpdateTTL,status:d}={}){if(a=this.requireSize(t,e,a,u),this.maxEntrySize&&a>this.maxEntrySize)return d&&(d.set="miss",d.maxEntrySizeExceeded=!0),this.delete(t),this;let l=this.size===0?void 0:this.keyMap.get(t);if(l===void 0)l=this.newIndex(),this.keyList[l]=t,this.valList[l]=e,this.keyMap.set(t,l),this.next[this.tail]=l,this.prev[l]=this.tail,this.tail=l,this.size++,this.addItemSize(l,a,d),d&&(d.set="add"),_=!1;else{this.moveToTail(l);let m=this.valList[l];if(e!==m){if(this.isBackgroundFetch(m)?m.__abortController.abort(new Error("replaced")):o||(this.dispose(m,t,"set"),this.disposeAfter&&this.disposed.push([m,t,"set"])),this.removeItemSize(l),this.valList[l]=e,this.addItemSize(l,a,d),d){d.set="replace";let c=m&&this.isBackgroundFetch(m)?m.__staleWhileFetching:m;c!==void 0&&(d.oldValue=c)}}else d&&(d.set="update")}if(i!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),_||this.setItemTTL(l,i,r),this.statusTTL(d,l),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let t=this.valList[this.head];return this.evict(!0),t}}evict(t){let e=this.head,i=this.keyList[e],r=this.valList[e];return this.isBackgroundFetch(r)?r.__abortController.abort(new Error("evicted")):(this.dispose(r,i,"evict"),this.disposeAfter&&this.disposed.push([r,i,"evict"])),this.removeItemSize(e),t&&(this.keyList[e]=null,this.valList[e]=null,this.free.push(e)),this.head=this.next[e],this.keyMap.delete(i),this.size--,e}has(t,{updateAgeOnHas:e=this.updateAgeOnHas,status:i}={}){let r=this.keyMap.get(t);if(r!==void 0)if(this.isStale(r))i&&(i.has="stale",this.statusTTL(i,r));else return e&&this.updateItemAge(r),i&&(i.has="hit"),this.statusTTL(i,r),!0;else i&&(i.has="miss");return!1}peek(t,{allowStale:e=this.allowStale}={}){let i=this.keyMap.get(t);if(i!==void 0&&(e||!this.isStale(i))){let r=this.valList[i];return this.isBackgroundFetch(r)?r.__staleWhileFetching:r}}backgroundFetch(t,e,i,r){let o=e===void 0?void 0:this.valList[e];if(this.isBackgroundFetch(o))return o;let a=new U;i.signal&&i.signal.addEventListener("abort",()=>a.abort(i.signal.reason));let u={signal:a.signal,options:i,context:r},_=(p,y=!1)=>{let{aborted:g}=a.signal,f=i.ignoreFetchAbort&&p!==void 0;return i.status&&(g&&!y?(i.status.fetchAborted=!0,i.status.fetchError=a.signal.reason,f&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),g&&!f&&!y?l(a.signal.reason):(this.valList[e]===c&&(p===void 0?c.__staleWhileFetching?this.valList[e]=c.__staleWhileFetching:this.delete(t):(i.status&&(i.status.fetchUpdated=!0),this.set(t,p,u.options))),p)},d=p=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=p),l(p)),l=p=>{let{aborted:y}=a.signal,g=y&&i.allowStaleOnFetchAbort,f=g||i.allowStaleOnFetchRejection,T=f||i.noDeleteOnFetchRejection;if(this.valList[e]===c&&(!T||c.__staleWhileFetching===void 0?this.delete(t):g||(this.valList[e]=c.__staleWhileFetching)),f)return i.status&&c.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw p},m=(p,y)=>{this.fetchMethod(t,o,u).then(g=>p(g),y),a.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(p(),i.allowStaleOnFetchAbort&&(p=g=>_(g,!0)))})};i.status&&(i.status.fetchDispatched=!0);let c=new Promise(m).then(_,d);return c.__abortController=a,c.__staleWhileFetching=o,c.__returned=null,e===void 0?(this.set(t,c,{...u.options,status:void 0}),e=this.keyMap.get(t)):this.valList[e]=c,c}isBackgroundFetch(t){return t&&typeof t=="object"&&typeof t.then=="function"&&Object.prototype.hasOwnProperty.call(t,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(t,"__returned")&&(t.__returned===t||t.__returned===null)}async fetch(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:u=0,sizeCalculation:_=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:c=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,fetchContext:y=this.fetchContext,forceRefresh:g=!1,status:f,signal:T}={}){if(!this.fetchMethod)return f&&(f.fetch="get"),this.get(t,{allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:r,status:f});let M={allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:r,ttl:o,noDisposeOnSet:a,size:u,sizeCalculation:_,noUpdateTTL:d,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:p,ignoreFetchAbort:c,status:f,signal:T},S=this.keyMap.get(t);if(S===void 0){f&&(f.fetch="miss");let v=this.backgroundFetch(t,S,M,y);return v.__returned=v}else{let v=this.valList[S];if(this.isBackgroundFetch(v)){let j=e&&v.__staleWhileFetching!==void 0;return f&&(f.fetch="inflight",j&&(f.returnedStale=!0)),j?v.__staleWhileFetching:v.__returned=v}let I=this.isStale(S);if(!g&&!I)return f&&(f.fetch="hit"),this.moveToTail(S),i&&this.updateItemAge(S),this.statusTTL(f,S),v;let F=this.backgroundFetch(t,S,M,y),D=F.__staleWhileFetching!==void 0,R=D&&e;return f&&(f.fetch=D&&I?"stale":"refresh",R&&I&&(f.returnedStale=!0)),R?F.__staleWhileFetching:F.__returned=F}}get(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:o}={}){let a=this.keyMap.get(t);if(a!==void 0){let u=this.valList[a],_=this.isBackgroundFetch(u);return this.statusTTL(o,a),this.isStale(a)?(o&&(o.get="stale"),_?(o&&(o.returnedStale=e&&u.__staleWhileFetching!==void 0),e?u.__staleWhileFetching:void 0):(r||this.delete(t),o&&(o.returnedStale=e),e?u:void 0)):(o&&(o.get="hit"),_?u.__staleWhileFetching:(this.moveToTail(a),i&&this.updateItemAge(a),u))}else o&&(o.get="miss")}connect(t,e){this.prev[e]=t,this.next[t]=e}moveToTail(t){t!==this.tail&&(t===this.head?this.head=this.next[t]:this.connect(this.prev[t],this.next[t]),this.connect(this.tail,t),this.tail=t)}get del(){return Q("del","delete"),this.delete}delete(t){let e=!1;if(this.size!==0){let i=this.keyMap.get(t);if(i!==void 0)if(e=!0,this.size===1)this.clear();else{this.removeItemSize(i);let r=this.valList[i];this.isBackgroundFetch(r)?r.__abortController.abort(new Error("deleted")):(this.dispose(r,t,"delete"),this.disposeAfter&&this.disposed.push([r,t,"delete"])),this.keyMap.delete(t),this.keyList[i]=null,this.valList[i]=null,i===this.tail?this.tail=this.prev[i]:i===this.head?this.head=this.next[i]:(this.next[this.prev[i]]=this.next[i],this.prev[this.next[i]]=this.prev[i]),this.size--,this.free.push(i)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return e}clear(){for(let t of this.rindexes({allowStale:!0})){let e=this.valList[t];if(this.isBackgroundFetch(e))e.__abortController.abort(new Error("deleted"));else{let i=this.keyList[t];this.dispose(e,i,"delete"),this.disposeAfter&&this.disposed.push([e,i,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Q("reset","clear"),this.clear}get length(){return Me("length","size"),this.size}static get AbortController(){return U}static get AbortSignal(){return Et}},Mt=w;var it=class extends Mt{constructor(t){super(t)}set(t,e){return super.set(t,e),this}delete(t){return this.del(t),!0}},Ie=(s,t)=>{let e=W.Cache;W.Cache=it.bind(null,t);let i=W(s);return W.Cache=e,i},Gs=s=>Ie(s,{max:1});n();var De=s=>A(s)&&st(s,"message",!1)&&typeof s.message=="string",G=class extends Error{res;req;status;method;requestedUrl;constructor(t,e,i){super(De(i)?`Couldn't handle request: ${e.method} ${t.url} - status: ${t.status} - ${i.message}`:`Couldn't fetch data: ${e.method} ${t.url} - status: ${t.status}`),this.name=this.constructor.name,this.res=t,this.req=e,this.status=t.status,this.method=e.method,this.requestedUrl=t.url,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}};n();var Zs=async(s,t)=>{try{return await s.json()}catch(e){throw new G(s,t,e)}};export{_t as a,wt as b,nt as c,ht as d,H as e,bt as f,J as g,W as h,Mt as i,Ie as j,Gs as k,G as l,Zs as m};

