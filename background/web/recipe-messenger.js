var c={unreadMessagesCount:'a[href*="/t/"] div[role="button"][aria-label] > span'},s=o=>{let t=document.querySelectorAll(c.unreadMessagesCount).length;o.setBadge(t)};window.sidekick(o=>{let t={dmItem:'a[href*="/t/"]',facebookPage:"#facebook"},n=async()=>{await o.waitDocReady();let a=/^(.*messenger.com\/t\/\d+)\/$/;Array.from(document.querySelectorAll("a")).map(e=>({link:e.href,spans:Array.from(e.querySelectorAll("span > span"))})).filter(({link:e})=>a.test(e)).filter(({spans:e})=>e.length>2).map(({link:e,spans:r})=>({link:e.replace(a,"$1"),title:r[0]?.innerText})).forEach(({link:e,title:r})=>{o.putResource(e,{title:r})})};o.observe(`${t.facebookPage}, ${t.dmItem}`,()=>s(o)),o.observe("a",n)});

