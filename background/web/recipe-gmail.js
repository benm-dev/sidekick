var g={accountAvatar:"img",accountButton:'header a[href*=accounts], header a[aria-label*="@"]'},L=/\((.+)\)$/,p=t=>`No element for selector ${t}`,E=async(t,l,o)=>{let c=t.assert;if(!t.isCookieExist(o)){t.setBadge(0);return}let s=await t.waitUntilElementExist(document,g.accountButton,l);c(!!s,p("accountButton")),c(!!s.ariaLabel,"Account button does not have ariaLabel");let r=await t.waitUntilElementExist(s,g.accountAvatar,l);c(!!r,p("accountImage"));let w=L.exec(s.ariaLabel)?.[1],u=r.src;t.setAccounts([{account:w,avatar:u,isCurrent:!0}])};var S={accountsNameFormat:"email",accountsType:"gsuite",authDomains:["mail.google.com","google.com/intl/*/gmail/about","google.com/gmail/about"],id:"gmail",loginURL:"https://accounts.google.com/AddSession?passive=true&Email={account}&continue=https://mail.google.com/mail/u/{account}",name:"Gmail",onboardingGrade:162,startURL:"https://mail.google.com/mail/u/{account}",welcomeURL:"https://mail.google.com/mail",hasFocusMode:!0};window.sidekick(t=>{let l=null,o={cancelStatusButton:'.J9fJmf [aria-label="Cancel"], .J9fJmf [aria-label="\u30AD\u30E3\u30F3\u30BB\u30EB"]',expireStatusList:'[jsaction][jsshadow][jsname][role="listbox"] > div',expireThisWeek:'div[data-value="5"]',unreadBadgeOld:'[role="navigation"] .aim:first-child > div:first-child[data-tooltip]',unreadBadgeNew:'[role="navigation"] > div:first-child > div:first-child[aria-label]',statusButton:'[aria-label^="Status"], [aria-label^="\u30B9\u30C6\u30FC\u30BF\u30B9"], .Yb.dIH7rb',statusInput:"input",submitStatusButton:'[data-id="iib5kc"]',title:"title",writeOwnStatusButton:'[role="button"].e15MNb.M9Bg4d'},c="GMAIL_AT",s=t.assert,r=45e3,w=/\s\d+\s/,u=e=>`No element for selector ${e}`,f=async()=>{if(!t.isCookieExist(c)){t.setBadge(0);return}let e=await t.waitUntilElementExist(document,`${o.unreadBadgeOld}, ${o.unreadBadgeNew}`,r);s(!!e,u("unreadBadge"),{clearBadges:!0});let a=w.exec(e.getAttribute("aria-label")||"")?.[0]||"";if(a){t.setBadge(Number.parseInt(a)||0);return}let n=e.innerText.split(`
`)[1]||"";t.setBadge(Number.parseInt(n)||0)},B=()=>window.self===window.top,A=()=>document.location.href.includes("id=spareFrame2"),y=()=>document.location.href.includes("id=spareFrame1"),b,v=new Promise(e=>{b=e}),T=()=>{let e=document.querySelectorAll("iframe");Array.from(e)?.some(a=>a.id==="talk_flyout"||a.className==="mb")&&t.injectToFrames(),Array.from(e)?.some(a=>a.id==="talk_flyout")&&Array.from(e)?.some(a=>a.className==="mB")&&b(!0)},h=async({text:e,requestedAt:a,force:n=!1})=>{if(!n&&window.localStorage.getItem("sidekick.last_status_text")===e)return!1;await t.waitDocReady(),await v;let i=await t.waitUntilElementExist(document,o.statusButton,r);return s(!!i,u("statusButton")),await t.waitMS(1e3),i.click(),l!==a?!1:(t.callSubscribers("POPUP_HANDLER",e),!0)};B()&&(t.observe("iframe",T),t.observe(`${o.unreadBadgeOld}, ${o.unreadBadgeNew}`,f),E(t,r,c).catch(console.error),t.addCustomSubscriber("SET_TO_ROOT_LS",(e,a)=>{window.localStorage.setItem(e,a)}),t.subscribeFocusMode(async e=>{let a=Date.now();if(l=a,await t.waitDocReady(),a!==l||e.shouldBeSilent&&(await t.waitPageWillBeHidden(),a!==l||(await t.waitPageWillBeVisible(),a!==l)))return;let n=Number(window.localStorage.getItem("sidekick.last_auto_sync_at")||""),i=d=>d/864e5,m=e.runEveryDays&&i(Date.now()-n)>e.runEveryDays;await h({force:!!m,requestedAt:a,text:`${e.enabled?"Focus mode":"Available"} (via Sidekick Browser)`})&&(t.triggerAnalyticEvent("content-script.focus-mode-changed",{"is-focus-mode-set":e.enabled,"recipe-id":S.id}),m&&window.localStorage.setItem("sidekick.last_auto_sync_at",JSON.stringify(Date.now())))})),A()&&t.addCustomSubscriber("POPUP_HANDLER",async e=>{let n=(await t.waitUntilElementExist(document,"c-wiz")).querySelectorAll("div > div > div > span")[3];if(!n)return;await t.waitMS(50);let i=new window.Event("mousedown",{bubbles:!0,cancelable:!0}),m=new window.Event("mouseup",{bubbles:!0,cancelable:!0});n?.dispatchEvent(i),n.click(),n?.dispatchEvent(m),t.callSubscribers("SET_STATUS_MODAL_HANDLER",e)}),y()&&t.addCustomSubscriber("SET_STATUS_MODAL_HANDLER",async e=>{let a=await t.waitUntilElementExist(document,o.writeOwnStatusButton,300);a&&a.click();let n=await t.waitUntilElementExist(document,o.statusInput,2e3);n||(await t.waitUntilElementExist(document,o.cancelStatusButton,300))?.click(),s(!!n,u("statusInput")),n.value=e,n.dispatchEvent(new window.Event("input",{bubbles:!0,cancelable:!0}));let i=await t.waitUntilElementExist(document,o.expireStatusList,r);s(!!i,u("expireStatusList")),i.click(),await t.waitMS(200);let m=await t.waitUntilElementExist(document,o.expireThisWeek,r);s(!!m,u("expireThisWeek")),await t.waitMS(30),document.querySelectorAll(o.expireThisWeek)[1]?.click(),await t.waitMS(100);let d=await t.waitUntilElementExist(document,o.submitStatusButton,r);s(!!d,u("submitStatusButton")),t.callSubscribers("SET_TO_ROOT_LS","sidekick.last_status_text",e),d.click()})});

